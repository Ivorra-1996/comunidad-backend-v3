{"version":3,"file":"provincias.js","names":["models","require","Op","getConFiltros","req","res","nombreProvincia","query","replace","provincias","findAll","attributes","where","or","nombre","iLike","order","then","send","catch","sendStatus"],"sources":["../../src/controllers/provincias.js"],"sourcesContent":["const models = require(\"../../database/models\");\nconst { Op } = require(\"sequelize\");\n\n//get de provincias\nexport const getConFiltros = async (req, res) => {\n  let nombreProvincia = req.query.nombreProvincia;\n\n\n  if (typeof nombreProvincia === \"undefined\") {\n    nombreProvincia = \"_\";\n  } else {\n    nombreProvincia = req.query.nombreProvincia.replace(/\\s/g, \"%\");\n  }\n\n  models.provincias\n    .findAll({\n      attributes: [\"id\",\"nombre\"],\n      where: {\n        [Op.or]: [\n          {\n            nombre: {\n              [Op.iLike]: `%${nombreProvincia}%`,\n            },\n          },\n        ],\n      },\n      order: [\"nombre\"],\n    })\n    .then((provincias) =>\n      res.send({\n        provincias\n      })\n    )\n    .catch(() => res.sendStatus(500));\n};\n"],"mappings":";;;;;;;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,uBAAD,CAAtB;;AACA,MAAM;EAAEC;AAAF,IAASD,OAAO,CAAC,WAAD,CAAtB,C,CAEA;;;AACO,MAAME,aAAa,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;EAC/C,IAAIC,eAAe,GAAGF,GAAG,CAACG,KAAJ,CAAUD,eAAhC;;EAGA,IAAI,OAAOA,eAAP,KAA2B,WAA/B,EAA4C;IAC1CA,eAAe,GAAG,GAAlB;EACD,CAFD,MAEO;IACLA,eAAe,GAAGF,GAAG,CAACG,KAAJ,CAAUD,eAAV,CAA0BE,OAA1B,CAAkC,KAAlC,EAAyC,GAAzC,CAAlB;EACD;;EAEDR,MAAM,CAACS,UAAP,CACGC,OADH,CACW;IACPC,UAAU,EAAE,CAAC,IAAD,EAAM,QAAN,CADL;IAEPC,KAAK,EAAE;MACL,CAACV,EAAE,CAACW,EAAJ,GAAS,CACP;QACEC,MAAM,EAAE;UACN,CAACZ,EAAE,CAACa,KAAJ,GAAa,IAAGT,eAAgB;QAD1B;MADV,CADO;IADJ,CAFA;IAWPU,KAAK,EAAE,CAAC,QAAD;EAXA,CADX,EAcGC,IAdH,CAcSR,UAAD,IACJJ,GAAG,CAACa,IAAJ,CAAS;IACPT;EADO,CAAT,CAfJ,EAmBGU,KAnBH,CAmBS,MAAMd,GAAG,CAACe,UAAJ,CAAe,GAAf,CAnBf;AAoBD,CA9BM"}