{"version":3,"file":"provincias.js","names":["models","require","Op","getConFiltros","req","res","nombreProvincia","query","replace","provincias","findAll","attributes","where","or","nombre","iLike","order","then","send","catch","sendStatus"],"sources":["../../src/controllers/provincias.js"],"sourcesContent":["const models = require(\"../../database/models\");\r\nconst { Op } = require(\"sequelize\");\r\n\r\n//get de provincias\r\nexport const getConFiltros = async (req, res) => {\r\n  let nombreProvincia = req.query.nombreProvincia;\r\n\r\n\r\n  if (typeof nombreProvincia === \"undefined\") {\r\n    nombreProvincia = \"_\";\r\n  } else {\r\n    nombreProvincia = req.query.nombreProvincia.replace(/\\s/g, \"%\");\r\n  }\r\n\r\n  models.provincias\r\n    .findAll({\r\n      attributes: [\"id\",\"nombre\"],\r\n      where: {\r\n        [Op.or]: [\r\n          {\r\n            nombre: {\r\n              [Op.iLike]: `%${nombreProvincia}%`,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n      order: [\"nombre\"],\r\n    })\r\n    .then((provincias) =>\r\n      res.send({\r\n        provincias\r\n      })\r\n    )\r\n    .catch(() => res.sendStatus(500));\r\n};\r\n"],"mappings":";;;;;;;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,uBAAD,CAAtB;;AACA,MAAM;EAAEC;AAAF,IAASD,OAAO,CAAC,WAAD,CAAtB,C,CAEA;;;AACO,MAAME,aAAa,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;EAC/C,IAAIC,eAAe,GAAGF,GAAG,CAACG,KAAJ,CAAUD,eAAhC;;EAGA,IAAI,OAAOA,eAAP,KAA2B,WAA/B,EAA4C;IAC1CA,eAAe,GAAG,GAAlB;EACD,CAFD,MAEO;IACLA,eAAe,GAAGF,GAAG,CAACG,KAAJ,CAAUD,eAAV,CAA0BE,OAA1B,CAAkC,KAAlC,EAAyC,GAAzC,CAAlB;EACD;;EAEDR,MAAM,CAACS,UAAP,CACGC,OADH,CACW;IACPC,UAAU,EAAE,CAAC,IAAD,EAAM,QAAN,CADL;IAEPC,KAAK,EAAE;MACL,CAACV,EAAE,CAACW,EAAJ,GAAS,CACP;QACEC,MAAM,EAAE;UACN,CAACZ,EAAE,CAACa,KAAJ,GAAa,IAAGT,eAAgB;QAD1B;MADV,CADO;IADJ,CAFA;IAWPU,KAAK,EAAE,CAAC,QAAD;EAXA,CADX,EAcGC,IAdH,CAcSR,UAAD,IACJJ,GAAG,CAACa,IAAJ,CAAS;IACPT;EADO,CAAT,CAfJ,EAmBGU,KAnBH,CAmBS,MAAMd,GAAG,CAACe,UAAJ,CAAe,GAAf,CAnBf;AAoBD,CA9BM"}