{"version":3,"file":"uploadFiles.js","names":["Storage","require","projectId","keyFilename","storage","bucket","uploadFiles","req","res","file","console","log","blob","originalname","blobStream","createWriteStream","on","status","send","end","buffer","error"],"sources":["../../src/controllers/uploadFiles.js"],"sourcesContent":["const { Storage } = require(\"@google-cloud/storage\");\n\nlet projectId = \"red-seeker-365622\"; // Get this from Google Cloud\nlet keyFilename = \"red-seeker-365622-b037b7220de8.json\"; // Get this from Google Cloud -> Credentials -> Service Accounts\nconst storage = new Storage({\n  projectId,\n  keyFilename,\n});\nconst bucket = storage.bucket(\"comunidadstorage\"); // Cloud -> Storage\n\nexport const uploadFiles = (req, res) => {\n  try {\n    if (req.file) {\n      console.log(\"Se encontro el archivo\");\n      const blob = bucket.file(req.file.originalname);\n      console.log(\"esto es lo que pasa como archivo\", req.file.originalname);\n      const blobStream = blob.createWriteStream();\n      blobStream.on(\"finish\", () => {\n        res.status(200).send(\"Success\");\n        console.log(\"Success\");\n      });\n      blobStream.end(req.file.buffer);\n    } else throw \"algun error con la subida de archivo\";\n  } catch (error) {\n    res.status(500).send(error);\n  }\n};\n"],"mappings":";;;;;;;AAAA,MAAM;EAAEA;AAAF,IAAcC,OAAO,CAAC,uBAAD,CAA3B;;AAEA,IAAIC,SAAS,GAAG,mBAAhB,C,CAAqC;;AACrC,IAAIC,WAAW,GAAG,qCAAlB,C,CAAyD;;AACzD,MAAMC,OAAO,GAAG,IAAIJ,OAAJ,CAAY;EAC1BE,SAD0B;EAE1BC;AAF0B,CAAZ,CAAhB;AAIA,MAAME,MAAM,GAAGD,OAAO,CAACC,MAAR,CAAe,kBAAf,CAAf,C,CAAmD;;AAE5C,MAAMC,WAAW,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;EACvC,IAAI;IACF,IAAID,GAAG,CAACE,IAAR,EAAc;MACZC,OAAO,CAACC,GAAR,CAAY,wBAAZ;MACA,MAAMC,IAAI,GAAGP,MAAM,CAACI,IAAP,CAAYF,GAAG,CAACE,IAAJ,CAASI,YAArB,CAAb;MACAH,OAAO,CAACC,GAAR,CAAY,kCAAZ,EAAgDJ,GAAG,CAACE,IAAJ,CAASI,YAAzD;MACA,MAAMC,UAAU,GAAGF,IAAI,CAACG,iBAAL,EAAnB;MACAD,UAAU,CAACE,EAAX,CAAc,QAAd,EAAwB,MAAM;QAC5BR,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,SAArB;QACAR,OAAO,CAACC,GAAR,CAAY,SAAZ;MACD,CAHD;MAIAG,UAAU,CAACK,GAAX,CAAeZ,GAAG,CAACE,IAAJ,CAASW,MAAxB;IACD,CAVD,MAUO,MAAM,sCAAN;EACR,CAZD,CAYE,OAAOC,KAAP,EAAc;IACdb,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,KAArB;EACD;AACF,CAhBM"}