{"version":3,"file":"files.js","names":["Storage","require","projectId","keyFilename","storage","bucket","uploadFiles","req","res","console","log","file","blob","originalname","blobStream","createWriteStream","on","status","send","end","buffer","error"],"sources":["../../src/controllers/files.js"],"sourcesContent":["const { Storage } = require(\"@google-cloud/storage\");\n\nlet projectId = \"red-seeker-365622\"; // Get this from Google Cloud\nlet keyFilename = \"../../red-seeker-365622-b037b7220de8.json\"; // Get this from Google Cloud -> Credentials -> Service Accounts\nconst storage = new Storage({\n  projectId,\n  keyFilename,\n});\nconst bucket = storage.bucket(\"comunidadstorage\"); // Get this from Google Cloud -> Storage\n\nexport const uploadFiles = (req, res) => {\n  console.log(\"Made it /upload\");\n  try {\n    if (req.file) {\n      console.log(\"File found, trying to upload...\");\n      const blob = bucket.file(req.file.originalname);\n      console.log(\"esto es lo que pasa como imagen\", req.file.originalname);\n      const blobStream = blob.createWriteStream();\n\n      blobStream.on(\"finish\", () => {\n        res.status(200).send(\"Success\");\n        console.log(\"Success\");\n      });\n      blobStream.end(req.file.buffer);\n    } else throw \"error with img\";\n  } catch (error) {\n    res.status(500).send(error);\n  }\n};"],"mappings":";;;;;;;AAAA,MAAM;EAAEA;AAAF,IAAcC,OAAO,CAAC,uBAAD,CAA3B;;AAEA,IAAIC,SAAS,GAAG,mBAAhB,C,CAAqC;;AACrC,IAAIC,WAAW,GAAG,2CAAlB,C,CAA+D;;AAC/D,MAAMC,OAAO,GAAG,IAAIJ,OAAJ,CAAY;EAC1BE,SAD0B;EAE1BC;AAF0B,CAAZ,CAAhB;AAIA,MAAME,MAAM,GAAGD,OAAO,CAACC,MAAR,CAAe,kBAAf,CAAf,C,CAAmD;;AAE5C,MAAMC,WAAW,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;EACvCC,OAAO,CAACC,GAAR,CAAY,iBAAZ;;EACA,IAAI;IACF,IAAIH,GAAG,CAACI,IAAR,EAAc;MACZF,OAAO,CAACC,GAAR,CAAY,iCAAZ;MACA,MAAME,IAAI,GAAGP,MAAM,CAACM,IAAP,CAAYJ,GAAG,CAACI,IAAJ,CAASE,YAArB,CAAb;MACAJ,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CH,GAAG,CAACI,IAAJ,CAASE,YAAxD;MACA,MAAMC,UAAU,GAAGF,IAAI,CAACG,iBAAL,EAAnB;MAEAD,UAAU,CAACE,EAAX,CAAc,QAAd,EAAwB,MAAM;QAC5BR,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,SAArB;QACAT,OAAO,CAACC,GAAR,CAAY,SAAZ;MACD,CAHD;MAIAI,UAAU,CAACK,GAAX,CAAeZ,GAAG,CAACI,IAAJ,CAASS,MAAxB;IACD,CAXD,MAWO,MAAM,gBAAN;EACR,CAbD,CAaE,OAAOC,KAAP,EAAc;IACdb,GAAG,CAACS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBG,KAArB;EACD;AACF,CAlBM"}