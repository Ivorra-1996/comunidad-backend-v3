{"version":3,"file":"idiomasPostulantes.js","names":["models","require","getAll","req","res","idiomas_postulantes","findAll","attributes","then","send","catch","sendStatus","postIdiomasPostulantes","create","fk_id_idioma","body","idIdioma","fk_id_postulante","idPostulante","fk_id_nivel","idNivel","status","id","error","console","log","findPorId","onSuccess","onNotFound","onError","findOne","include","as","model","idiomas","postulantes","niveles_idiomas","where","getPorId","params"],"sources":["../../src/controllers/idiomasPostulantes.js"],"sourcesContent":["const models = require(\"../../database/models\");\r\n\r\nexport const getAll = async (req, res) => {\r\n\r\n  models.idiomas_postulantes\r\n    .findAll({\r\n      attributes: [\"id\",\"fk_id_idioma\",\"fk_id_postulante\",\"fk_id_nivel\"]\r\n    }).then(idiomas_postulantes => res.send({\r\n      idiomas_postulantes\r\n      \r\n    })).catch(() => res.sendStatus(500));\r\n};\r\n\r\n\r\nexport const postIdiomasPostulantes = async (req, res) => {\r\n  models.idiomas_postulantes\r\n    .create({\r\n      fk_id_idioma: req.body.idIdioma,     \r\n      fk_id_postulante: req.body.idPostulante,          \r\n      fk_id_nivel: req.body.idNivel,         \r\n    })\r\n    .then(\r\n      (idiomas_postulantes) => res.status(201).send({ id: idiomas_postulantes.id }))\r\n\r\n    .catch((error) => {\r\n      if (error == \"SequelizeUniqueConstraintError: Validation error\") {\r\n        res.status(401).send(\"Bad request: Algun tipo de error de validacion de campos\");\r\n      } else {\r\n        console.log(`Error al intentar insertar en la base de datos: ${error}`);\r\n        res.sendStatus(500);\r\n      }\r\n    });\r\n};\r\n\r\nconst findPorId = (\r\n  fk_id_postulante,\r\n  { onSuccess, onNotFound, onError }\r\n) => {\r\n  models.idiomas_postulantes\r\n    .findOne({\r\n      include: [\r\n        {\r\n          as: \"Idioma\",\r\n          model: models.idiomas,\r\n          attributes: [\"id\", \"nombre_idioma\"],\r\n        },\r\n        {\r\n          as: \"Postulante\",\r\n          model: models.postulantes,\r\n          attributes: [\"id\", \"fk_id_usuario\"],\r\n        },\r\n        {\r\n          as: \"Nivel\",\r\n          model: models.niveles_idiomas,\r\n          attributes: [\"id\", \"nivel\"],\r\n        },\r\n      ],\r\n      where: { fk_id_postulante },\r\n    })\r\n    .then((idiomas_postulantes) =>\r\n      idiomas_postulantes ? onSuccess(idiomas_postulantes) : onNotFound()\r\n    )\r\n    .catch(() => onError());\r\n};\r\n\r\nexport const getPorId = async (req, res) => {\r\n  findPorId(req.params.id, {\r\n    onSuccess: (idiomas_postulantes) => res.send(idiomas_postulantes),\r\n    onNotFound: () => res.sendStatus(401),\r\n    onError: () => res.sendStatus(400),\r\n  });\r\n};\r\n"],"mappings":";;;;;;;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,uBAAD,CAAtB;;AAEO,MAAMC,MAAM,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;EAExCJ,MAAM,CAACK,mBAAP,CACGC,OADH,CACW;IACPC,UAAU,EAAE,CAAC,IAAD,EAAM,cAAN,EAAqB,kBAArB,EAAwC,aAAxC;EADL,CADX,EAGKC,IAHL,CAGUH,mBAAmB,IAAID,GAAG,CAACK,IAAJ,CAAS;IACtCJ;EADsC,CAAT,CAHjC,EAMMK,KANN,CAMY,MAAMN,GAAG,CAACO,UAAJ,CAAe,GAAf,CANlB;AAOD,CATM;;;;AAYA,MAAMC,sBAAsB,GAAG,OAAOT,GAAP,EAAYC,GAAZ,KAAoB;EACxDJ,MAAM,CAACK,mBAAP,CACGQ,MADH,CACU;IACNC,YAAY,EAAEX,GAAG,CAACY,IAAJ,CAASC,QADjB;IAENC,gBAAgB,EAAEd,GAAG,CAACY,IAAJ,CAASG,YAFrB;IAGNC,WAAW,EAAEhB,GAAG,CAACY,IAAJ,CAASK;EAHhB,CADV,EAMGZ,IANH,CAOKH,mBAAD,IAAyBD,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBZ,IAAhB,CAAqB;IAAEa,EAAE,EAAEjB,mBAAmB,CAACiB;EAA1B,CAArB,CAP7B,EASGZ,KATH,CASUa,KAAD,IAAW;IAChB,IAAIA,KAAK,IAAI,kDAAb,EAAiE;MAC/DnB,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBZ,IAAhB,CAAqB,0DAArB;IACD,CAFD,MAEO;MACLe,OAAO,CAACC,GAAR,CAAa,mDAAkDF,KAAM,EAArE;MACAnB,GAAG,CAACO,UAAJ,CAAe,GAAf;IACD;EACF,CAhBH;AAiBD,CAlBM;;;;AAoBP,MAAMe,SAAS,GAAG,CAChBT,gBADgB,EAEhB;EAAEU,SAAF;EAAaC,UAAb;EAAyBC;AAAzB,CAFgB,KAGb;EACH7B,MAAM,CAACK,mBAAP,CACGyB,OADH,CACW;IACPC,OAAO,EAAE,CACP;MACEC,EAAE,EAAE,QADN;MAEEC,KAAK,EAAEjC,MAAM,CAACkC,OAFhB;MAGE3B,UAAU,EAAE,CAAC,IAAD,EAAO,eAAP;IAHd,CADO,EAMP;MACEyB,EAAE,EAAE,YADN;MAEEC,KAAK,EAAEjC,MAAM,CAACmC,WAFhB;MAGE5B,UAAU,EAAE,CAAC,IAAD,EAAO,eAAP;IAHd,CANO,EAWP;MACEyB,EAAE,EAAE,OADN;MAEEC,KAAK,EAAEjC,MAAM,CAACoC,eAFhB;MAGE7B,UAAU,EAAE,CAAC,IAAD,EAAO,OAAP;IAHd,CAXO,CADF;IAkBP8B,KAAK,EAAE;MAAEpB;IAAF;EAlBA,CADX,EAqBGT,IArBH,CAqBSH,mBAAD,IACJA,mBAAmB,GAAGsB,SAAS,CAACtB,mBAAD,CAAZ,GAAoCuB,UAAU,EAtBrE,EAwBGlB,KAxBH,CAwBS,MAAMmB,OAAO,EAxBtB;AAyBD,CA7BD;;AA+BO,MAAMS,QAAQ,GAAG,OAAOnC,GAAP,EAAYC,GAAZ,KAAoB;EAC1CsB,SAAS,CAACvB,GAAG,CAACoC,MAAJ,CAAWjB,EAAZ,EAAgB;IACvBK,SAAS,EAAGtB,mBAAD,IAAyBD,GAAG,CAACK,IAAJ,CAASJ,mBAAT,CADb;IAEvBuB,UAAU,EAAE,MAAMxB,GAAG,CAACO,UAAJ,CAAe,GAAf,CAFK;IAGvBkB,OAAO,EAAE,MAAMzB,GAAG,CAACO,UAAJ,CAAe,GAAf;EAHQ,CAAhB,CAAT;AAKD,CANM"}