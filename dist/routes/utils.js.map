{"version":3,"file":"utils.js","names":["withErrorHandling","fn","req","res","next","Promise","resolve","catch","errorAwareRouter","basicRouter","express","Router","newRouter","params","get","path","controller","post","patch","delete","put"],"sources":["../../src/routes/utils.js"],"sourcesContent":["import express from 'express';\n\nexport const withErrorHandling = (fn) => (req, res, next) =>\n  Promise.resolve(fn(req, res, next)).catch(next);\n\nexport function errorAwareRouter() {\n  const basicRouter = express.Router();\n  function newRouter(...params) {\n    basicRouter(...params);\n  }\n  newRouter.get = function (path, controller) {\n    basicRouter.get(path, withErrorHandling(controller));\n  };\n  newRouter.post = function (path, controller) {\n    basicRouter.post(path, withErrorHandling(controller));\n  };\n  newRouter.patch = function (path, controller) {\n    basicRouter.patch(path, withErrorHandling(controller));\n  };\n  newRouter.delete = function (path, controller) {\n    basicRouter.delete(path, withErrorHandling(controller));\n  };\n  newRouter.put = function (path, controller) {\n    basicRouter.put(path, withErrorHandling(controller));\n  };\n  return newRouter;\n}"],"mappings":";;;;;;;;AAAA;;;;AAEO,MAAMA,iBAAiB,GAAIC,EAAD,IAAQ,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KACvCC,OAAO,CAACC,OAAR,CAAgBL,EAAE,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,CAAlB,EAAoCG,KAApC,CAA0CH,IAA1C,CADK;;;;AAGA,SAASI,gBAAT,GAA4B;EACjC,MAAMC,WAAW,GAAGC,gBAAA,CAAQC,MAAR,EAApB;;EACA,SAASC,SAAT,CAAmB,GAAGC,MAAtB,EAA8B;IAC5BJ,WAAW,CAAC,GAAGI,MAAJ,CAAX;EACD;;EACDD,SAAS,CAACE,GAAV,GAAgB,UAAUC,IAAV,EAAgBC,UAAhB,EAA4B;IAC1CP,WAAW,CAACK,GAAZ,CAAgBC,IAAhB,EAAsBf,iBAAiB,CAACgB,UAAD,CAAvC;EACD,CAFD;;EAGAJ,SAAS,CAACK,IAAV,GAAiB,UAAUF,IAAV,EAAgBC,UAAhB,EAA4B;IAC3CP,WAAW,CAACQ,IAAZ,CAAiBF,IAAjB,EAAuBf,iBAAiB,CAACgB,UAAD,CAAxC;EACD,CAFD;;EAGAJ,SAAS,CAACM,KAAV,GAAkB,UAAUH,IAAV,EAAgBC,UAAhB,EAA4B;IAC5CP,WAAW,CAACS,KAAZ,CAAkBH,IAAlB,EAAwBf,iBAAiB,CAACgB,UAAD,CAAzC;EACD,CAFD;;EAGAJ,SAAS,CAACO,MAAV,GAAmB,UAAUJ,IAAV,EAAgBC,UAAhB,EAA4B;IAC7CP,WAAW,CAACU,MAAZ,CAAmBJ,IAAnB,EAAyBf,iBAAiB,CAACgB,UAAD,CAA1C;EACD,CAFD;;EAGAJ,SAAS,CAACQ,GAAV,GAAgB,UAAUL,IAAV,EAAgBC,UAAhB,EAA4B;IAC1CP,WAAW,CAACW,GAAZ,CAAgBL,IAAhB,EAAsBf,iBAAiB,CAACgB,UAAD,CAAvC;EACD,CAFD;;EAGA,OAAOJ,SAAP;AACD"}